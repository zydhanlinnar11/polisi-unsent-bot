<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Send to <%= server_name %></title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.15.3/css/all.css"
      integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk"
      crossorigin="anonymous"
    />
    <script src="/send-message-script.js" defer></script>
  </head>
  <body>
    <h2>Send to <%= name %> (<%= server_name %>)</h2>

    <div
      id="alert"
      class="alert alert-dismissible"
      role="alert"
      style="visibility: hidden; position: fixed"
    >
      <span id="alert-message"></span
      ><button
        type="button"
        id="alert-close-btn"
        class="btn-close"
        aria-label="Close"
      ></button>
    </div>

    <form action="javascript:sendMessage()">
      <div class="mb-3">
        <label for="msg" class="form-label">Message</label>
        <input type="text" name="msg" id="msg" class="form-control" />
      </div>

      <div class="col-12">
        <a href="/server" class="btn btn-danger">Back to server list</a>
        <a href="/server/<%= server_id %> " class="btn btn-secondary"
          >Back to channel list</a
        >
        <button type="reset" class="btn btn-warning">Reset</button>
        <button class="btn btn-primary" id="send-message-button" type="submit">
          Send
        </button>
      </div>
    </form>

    <h4>Want to tag someone? Press its name</h4>
    <ul class="list-group">
      <% members.forEach(member => { %>
      <button class="list-group-item" id="<%= member.id %>">
        <% if (member.avatarURL != null) { %>
        <img
          src="<%= member.avatarURL %>"
          alt="<%= member.nick %>-avatar"
          style="height: 28px; border-radius: 50%"
        />
        <% } %> <%= member.nick %>
      </button>
      <% }) %>
    </ul>
  </body>
</html>
